{
  "project": "NOC Toolkit",
  "branchName": "ralph/noc-toolkit-production-readiness",
  "description": "Production Readiness - Docker deployment, Flask blueprints restructure, PostgreSQL migration, security improvements, deprecated feature removal, and Playwright E2E tests",
  "userStories": [
    {
      "id": "US-001",
      "title": "Create Docker and Docker Compose Configuration",
      "description": "As a DevOps engineer, I want to deploy NOC Toolkit with a single docker-compose up command so that new machine setup takes minutes instead of hours.",
      "acceptanceCriteria": [
        "Create Dockerfile with Python 3.11+ base image",
        "Create docker-compose.yml with services: app, postgres",
        "Create .env.example with all required environment variables documented",
        "Create docker-entrypoint.sh that handles database initialization",
        "Create health check endpoint /health that returns 200 when app is ready",
        "PostgreSQL data persists in named volume",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Create Production-Ready Requirements and Dependencies",
      "description": "As a developer, I want clearly separated development and production dependencies so that production images are lean and secure.",
      "acceptanceCriteria": [
        "Create requirements/base.txt with core dependencies",
        "Create requirements/prod.txt extending base with gunicorn, psycopg2-binary",
        "Create requirements/dev.txt extending base with pytest, playwright, black, flake8",
        "Update Dockerfile to use requirements/prod.txt",
        "Add pyproject.toml for modern Python project configuration",
        "All imports resolve successfully after restructure",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Create Project Documentation for GitHub",
      "description": "As a new contributor, I want clear documentation so that I can understand how to set up, run, and contribute to the project.",
      "acceptanceCriteria": [
        "Create/update README.md with project overview, features, and quick start",
        "Create docs/DEPLOYMENT.md with production deployment guide",
        "Create docs/DEVELOPMENT.md with local development setup",
        "Create docs/CONTRIBUTING.md with contribution guidelines",
        "Create CHANGELOG.md for version history"
      ],
      "priority": 3,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Create Blueprint Directory Structure",
      "description": "As a developer, I want the codebase organized by feature domain so that I can quickly find and modify related code.",
      "acceptanceCriteria": [
        "Create src/ directory as main package with __init__.py",
        "Create src/blueprints/ directory with subdirectories: auth/, admin/, wlc/, solarwinds/, config/, bulk_ssh/, certs/, jobs/, kb/, api/",
        "Each blueprint directory contains __init__.py",
        "Create src/core/ for shared utilities (db, security, helpers) with __init__.py",
        "Create src/models/ for database models with __init__.py",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Create Application Factory and Config Classes",
      "description": "As a developer, I want the app to use the factory pattern so that testing and configuration is easier.",
      "acceptanceCriteria": [
        "Create src/config.py with configuration classes (Development, Production, Testing)",
        "Create src/app.py with create_app(config_name) factory function stub",
        "Create wsgi.py as production entry point that calls create_app",
        "Factory function initializes Flask app with config",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Extract Core Utilities to src/core",
      "description": "As a developer, I want shared utilities in a dedicated module so they can be imported by all blueprints.",
      "acceptanceCriteria": [
        "Create src/core/database.py with database connection utilities from tools/db_jobs.py",
        "Create src/core/security.py by copying tools/security.py",
        "Create src/core/helpers.py with shared helper functions",
        "Update imports in core modules to be relative",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Extract Auth Blueprint Routes",
      "description": "As a developer, I want authentication routes in a dedicated blueprint so that auth logic is isolated and testable.",
      "acceptanceCriteria": [
        "Create src/blueprints/auth/routes.py with routes: /login, /logout, /profile",
        "Create src/blueprints/auth/templates/ directory",
        "Move login.html to src/blueprints/auth/templates/",
        "Move profile.html to src/blueprints/auth/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Extract Admin Blueprint Routes",
      "description": "As a developer, I want admin routes in a dedicated blueprint so that administrative functions are clearly separated.",
      "acceptanceCriteria": [
        "Create src/blueprints/admin/routes.py with routes: /admin/users, /admin/settings, /admin/page-settings",
        "Create src/blueprints/admin/templates/ directory",
        "Move admin_users.html to src/blueprints/admin/templates/",
        "Move admin_settings.html to src/blueprints/admin/templates/",
        "Move admin_page_settings.html to src/blueprints/admin/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 8,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Extract WLC Blueprint Routes",
      "description": "As a developer, I want WLC-related routes in a dedicated blueprint so that wireless controller features are grouped together.",
      "acceptanceCriteria": [
        "Create src/blueprints/wlc/routes.py with routes: /tools/wlc (menu), /tools/wlc/dashboard, /tools/wlc/ap-inventory, /tools/wlc/summer-guest, /tools/wlc-rf, /tools/wlc-rf-troubleshoot, /tools/wlc-clients-troubleshoot",
        "Create src/blueprints/wlc/templates/ directory",
        "Move wlc_dashboard.html, ap_inventory.html, wlc_summer_guest.html, wlc_rf.html to src/blueprints/wlc/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 9,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Extract SolarWinds Blueprint Routes",
      "description": "As a developer, I want SolarWinds routes in a dedicated blueprint so that inventory features are cleanly organized.",
      "acceptanceCriteria": [
        "Create src/blueprints/solarwinds/routes.py with routes: /tools/solarwinds/nodes, /tools/solarwinds/inventory, /api/solarwinds/nodes",
        "Create src/blueprints/solarwinds/templates/ directory",
        "Move solarwinds_nodes.html, solarwinds_inventory.html to src/blueprints/solarwinds/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 10,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Extract Config Blueprint Routes",
      "description": "As a developer, I want configuration management routes in a dedicated blueprint.",
      "acceptanceCriteria": [
        "Create src/blueprints/config/routes.py with routes: /tools/phrase-search, /search, /download-csv, /tools/global-config, /global/*, /changes, /changes/<id>, /actions/*",
        "Create src/blueprints/config/templates/ directory",
        "Move phrase_search.html, global_config.html, changes.html to src/blueprints/config/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 11,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Extract Bulk SSH Blueprint Routes",
      "description": "As a developer, I want bulk SSH routes in a dedicated blueprint.",
      "acceptanceCriteria": [
        "Create src/blueprints/bulk_ssh/routes.py with routes: /tools/bulk-ssh, /tools/bulk-ssh/templates, /tools/bulk-ssh/schedules, /tools/bulk-ssh/results/<job_id>, /api/bulk-ssh/*",
        "Create src/blueprints/bulk_ssh/templates/ directory",
        "Move bulk_ssh.html, bulk_ssh_templates.html, bulk_ssh_schedules.html, bulk_ssh_results.html to src/blueprints/bulk_ssh/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 12,
      "passes": true,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Extract Certs Blueprint Routes",
      "description": "As a developer, I want certificate management routes in a dedicated blueprint.",
      "acceptanceCriteria": [
        "Create src/blueprints/certs/routes.py with routes: /certs, /certs/<id>, /certs/upload, /cert-converter, /cert-chain, /ise-nodes",
        "Create src/blueprints/certs/templates/ directory",
        "Move certs.html, cert_detail.html, ise_nodes.html to src/blueprints/certs/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Extract Jobs Blueprint Routes",
      "description": "As a developer, I want job management routes in a dedicated blueprint.",
      "acceptanceCriteria": [
        "Create src/blueprints/jobs/routes.py with routes: /jobs, /jobs/<job_id>, /api/jobs, /api/jobs/<job_id>/progress",
        "Create src/blueprints/jobs/templates/ directory",
        "Move jobs.html, job_detail.html to src/blueprints/jobs/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "Extract Knowledge Base Blueprint Routes",
      "description": "As a developer, I want knowledge base routes in a dedicated blueprint.",
      "acceptanceCriteria": [
        "Create src/blueprints/kb/routes.py with routes: /knowledge-base, /knowledge-base/create, /knowledge-base/<id>, /knowledge-base/<id>/edit",
        "Create src/blueprints/kb/templates/ directory",
        "Move knowledge_base.html, kb_article.html, kb_edit.html to src/blueprints/kb/templates/",
        "Register blueprint in app factory",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Update Base Template and Static Files",
      "description": "As a developer, I want the base template to work with the new blueprint structure.",
      "acceptanceCriteria": [
        "Move base.html to src/templates/base.html",
        "Move static/ directory to src/static/",
        "Update Flask app config for template and static folders",
        "Update url_for() calls in base.html to use blueprint prefixes where needed",
        "Typecheck passes"
      ],
      "priority": 16,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Create PostgreSQL Database Models - User and Settings",
      "description": "As a developer, I want SQLAlchemy models for users and settings so the application works with PostgreSQL.",
      "acceptanceCriteria": [
        "Add Flask-SQLAlchemy and psycopg2-binary to requirements/base.txt",
        "Create src/models/user.py with User and Session models",
        "Create src/models/settings.py with AppSettings and PageSettings models",
        "Models include proper indexes matching current SQLite schema",
        "Typecheck passes"
      ],
      "priority": 17,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Create PostgreSQL Database Models - Jobs and Events",
      "description": "As a developer, I want SQLAlchemy models for jobs and events.",
      "acceptanceCriteria": [
        "Create src/models/job.py with Job and JobEvent models",
        "Create src/models/audit.py with AuditLog model",
        "Foreign key relationships defined correctly",
        "Typecheck passes"
      ],
      "priority": 18,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-019",
      "title": "Create PostgreSQL Database Models - WLC and SolarWinds",
      "description": "As a developer, I want SQLAlchemy models for WLC and SolarWinds data.",
      "acceptanceCriteria": [
        "Create src/models/wlc.py with WLCDashboardSettings, WLCSample, APInventory models",
        "Create src/models/solarwinds.py with SolarWindsSettings, SolarWindsNode models",
        "Models include proper indexes",
        "Typecheck passes"
      ],
      "priority": 19,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-020",
      "title": "Create PostgreSQL Database Models - Bulk SSH and Config",
      "description": "As a developer, I want SQLAlchemy models for bulk SSH and config management.",
      "acceptanceCriteria": [
        "Create src/models/bulk_ssh.py with BulkSSHJob, BulkSSHResult, BulkSSHTemplate, BulkSSHSchedule models",
        "Create src/models/config.py with ChangeWindow and ChangeEvent models",
        "Models include proper indexes",
        "Typecheck passes"
      ],
      "priority": 20,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-021",
      "title": "Create PostgreSQL Database Models - Certs and KB",
      "description": "As a developer, I want SQLAlchemy models for certificates and knowledge base.",
      "acceptanceCriteria": [
        "Create src/models/cert.py with Certificate, ISENode, CertSyncSettings models",
        "Create src/models/kb.py with KBArticle model",
        "Models include proper indexes",
        "Typecheck passes"
      ],
      "priority": 21,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Create Database Migration System",
      "description": "As a developer, I want Alembic migrations so that database schema changes are versioned and reproducible.",
      "acceptanceCriteria": [
        "Add Flask-Migrate (Alembic) to requirements/base.txt",
        "Initialize migrations directory with flask db init",
        "Create initial migration with all models",
        "Create scripts/init_db.py for first-time database setup",
        "Typecheck passes"
      ],
      "priority": 22,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-023",
      "title": "Create First-Run Setup Wizard",
      "description": "As an administrator, I want a web-based setup wizard on first run so that I can securely set the admin password without it appearing in logs.",
      "acceptanceCriteria": [
        "Detect first-run state (no users in database)",
        "Create src/blueprints/setup/ blueprint with setup wizard routes",
        "Redirect all routes to /setup when in first-run state",
        "Setup wizard page collects: admin username, admin password with confirmation",
        "Password validation: minimum 12 characters",
        "After setup, redirect to login page",
        "Setup route returns 404 after initial setup complete",
        "Typecheck passes"
      ],
      "priority": 23,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-024",
      "title": "Remove Password Logging and Improve Security",
      "description": "As a security engineer, I want no passwords logged to console or files so that credentials are not exposed.",
      "acceptanceCriteria": [
        "Remove print() statement logging default password in security.py:146",
        "Audit all print() statements for credential exposure and remove any found",
        "Replace print statements with proper Python logging",
        "Remove default value from FLASK_SECRET_KEY - require it in production",
        "Application refuses to start in production without FLASK_SECRET_KEY",
        "Typecheck passes"
      ],
      "priority": 24,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-025",
      "title": "Remove Deprecated Device Inventory Page",
      "description": "As a product owner, I want the deprecated /tools/device-inventory page removed so that users use the SolarWinds-based inventory instead.",
      "acceptanceCriteria": [
        "Remove /tools/device-inventory route and related routes from app.py",
        "Remove templates/device_inventory.html",
        "Remove device_inventory functions from db_jobs.py",
        "Update navigation to remove Device Inventory link",
        "Update page_settings to remove device-inventory entry",
        "Typecheck passes"
      ],
      "priority": 25,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-026",
      "title": "Set Up Playwright Test Infrastructure",
      "description": "As a developer, I want a Playwright test infrastructure so that I can write and run E2E tests.",
      "acceptanceCriteria": [
        "Add pytest-playwright to requirements/dev.txt",
        "Create tests/ directory structure: tests/e2e/, tests/conftest.py, tests/e2e/conftest.py",
        "Create pytest.ini configuration for Playwright",
        "Create test database seeding script in tests/seed_test_data.py",
        "Tests can run with pytest tests/e2e/",
        "Typecheck passes"
      ],
      "priority": 26,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-027",
      "title": "Create Auth E2E Tests",
      "description": "As a developer, I want E2E tests for authentication flows.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_auth.py",
        "Test: Login with valid credentials succeeds",
        "Test: Login with invalid credentials shows error",
        "Test: Logout redirects to login page",
        "Test: Protected pages redirect to login when not authenticated",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 27,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-028",
      "title": "Create Admin E2E Tests",
      "description": "As a developer, I want E2E tests for admin functionality.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_admin.py",
        "Test: Create new user",
        "Test: Edit user role",
        "Test: Toggle page visibility",
        "Test: Non-admin cannot access admin pages",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 28,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-029",
      "title": "Create WLC Dashboard E2E Tests",
      "description": "As a developer, I want E2E tests for WLC dashboard functionality.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_wlc.py",
        "Test: Dashboard page loads with charts placeholder",
        "Test: Dashboard settings page can be accessed",
        "Test: AP inventory page displays (empty state or data)",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 29,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-030",
      "title": "Create SolarWinds Inventory E2E Tests",
      "description": "As a developer, I want E2E tests for SolarWinds inventory functionality.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_solarwinds.py",
        "Test: Inventory page loads",
        "Test: Search/filter input is present",
        "Test: Export button is present",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 30,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-031",
      "title": "Create Bulk SSH E2E Tests",
      "description": "As a developer, I want E2E tests for bulk SSH functionality.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_bulk_ssh.py",
        "Test: Bulk SSH page loads",
        "Test: Templates page loads with template list",
        "Test: Schedules page loads",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 31,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-032",
      "title": "Create Certificate Tracker E2E Tests",
      "description": "As a developer, I want E2E tests for certificate management.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_certs.py",
        "Test: Certificate tracker page loads",
        "Test: ISE nodes page loads",
        "Test: Certificate converter page loads",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 32,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-033",
      "title": "Create Knowledge Base E2E Tests",
      "description": "As a developer, I want E2E tests for knowledge base functionality.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_kb.py",
        "Test: Knowledge base page loads",
        "Test: New article button visible for authorized users",
        "Test: Search input is present",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 33,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-034",
      "title": "Create Setup Wizard E2E Tests",
      "description": "As a developer, I want E2E tests for the first-run setup wizard.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_setup.py",
        "Test: Fresh database redirects to setup",
        "Test: Setup wizard validates password requirements",
        "Test: Setup wizard creates admin user and redirects to login",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 34,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-035",
      "title": "Create Smoke Test Suite",
      "description": "As a developer, I want a smoke test that validates all pages load without errors.",
      "acceptanceCriteria": [
        "Create tests/e2e/test_smoke.py",
        "Test iterates through main navigation links",
        "Each accessible page returns 200 status (or 302 redirect for auth)",
        "No JavaScript console errors on tested pages",
        "All tests pass locally",
        "Typecheck passes"
      ],
      "priority": 35,
      "passes": false,
      "notes": ""
    }
  ]
}
