{
  "project": "NOC Toolkit",
  "branchName": "ralph/production-readiness",
  "description": "Production Readiness & New Features - Audit existing tools, add timezone configuration, auto-updating AP inventory, and SolarWinds hardware/software inventory",
  "userStories": [
    {
      "id": "US-001",
      "title": "Audit WLC Dashboard and Polling System",
      "description": "As a NOC engineer, I need the WLC Dashboard to reliably poll and display wireless statistics so I can monitor the network in real-time.",
      "acceptanceCriteria": [
        "Verify WLC dashboard settings save/load correctly",
        "Confirm polling interval works as configured",
        "Validate time-series data storage and retrieval (24h, 3d, 7d, 30d ranges)",
        "Test both Cisco 9800 and Aruba AOS controller support",
        "Verify stat cards and graphs render correctly",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Fixed Aruba settings persistence bug - aruba_hosts and aruba_enabled were not saved/loaded from DB"
    },
    {
      "id": "US-002",
      "title": "Audit Bulk SSH Tool and Templates",
      "description": "As a NOC engineer, I need the Bulk SSH tool to reliably execute commands across multiple devices so I can perform bulk operations.",
      "acceptanceCriteria": [
        "Verify template creation, editing, and deletion works",
        "Test command execution against multiple devices",
        "Validate variable substitution in templates",
        "Confirm results are properly stored and displayed",
        "Test CSV export of results",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 2,
      "passes": true,
      "notes": "All functionality verified working - templates CRUD, variable substitution, job execution, results display, CSV export"
    },
    {
      "id": "US-003",
      "title": "Audit Bulk SSH Scheduling System",
      "description": "As a NOC engineer, I need scheduled SSH jobs to execute at the correct times so automated tasks run reliably.",
      "acceptanceCriteria": [
        "Verify schedule creation (one-time, cron, interval)",
        "Confirm next_run calculation is accurate",
        "Test that scheduled jobs execute within 60 seconds of due time",
        "Validate schedule enable/disable functionality",
        "Verify execution history is recorded",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Fixed timezone mismatch in schedule_worker.py and db_jobs.py. Added schedule creation UI modal. Verified one-time, daily, weekly schedules work. Enable/disable toggle verified. Note: System supports once/daily/weekly (not cron expressions)."
    },
    {
      "id": "US-004",
      "title": "Audit Change Management Workflow",
      "description": "As a NOC engineer, I need the change management system to schedule and execute changes at the correct times with proper audit trails.",
      "acceptanceCriteria": [
        "Verify change window creation with scheduled datetime",
        "Confirm changes execute when scheduled time arrives",
        "Test rollback functionality works correctly",
        "Validate change event audit trail is complete",
        "Verify change status transitions (pending -> running -> completed/failed)",
        "Test that apply and rollback CLI payloads execute correctly",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Added missing CSS status classes (scheduled, running, rollback-running, rolled-back, rollback-failed). All functionality verified: change creation, scheduled execution, rollback, status transitions, audit trail."
    },
    {
      "id": "US-005",
      "title": "Audit SolarWinds Integration",
      "description": "As a NOC engineer, I need SolarWinds integration to reliably sync node data so I can use it as a source for other tools.",
      "acceptanceCriteria": [
        "Verify settings page saves credentials correctly",
        "Test connection validation works",
        "Confirm node sync fetches all expected fields",
        "Validate organization mapping works",
        "Test that nodes display correctly in the UI",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 5,
      "passes": true,
      "notes": "All functionality verified working - settings persistence, connection polling, node sync (17028 nodes), organization mapping via CustomProperties.Organization, filtering, pagination. No issues found."
    },
    {
      "id": "US-006",
      "title": "Audit WLC Summer Guest Automation",
      "description": "As a NOC engineer, I need the Summer Guest WLAN automation to enable/disable WLANs at the correct times.",
      "acceptanceCriteria": [
        "Verify settings configuration saves correctly",
        "Confirm scheduled enable/disable executes at configured time",
        "Test timezone-aware scheduling works",
        "Validate WLAN state changes are logged",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-007",
      "title": "Audit Certificate Tracker and ISE Sync",
      "description": "As a NOC engineer, I need certificate tracking to reliably monitor expiration dates and sync from ISE nodes.",
      "acceptanceCriteria": [
        "Verify certificate upload and parsing works",
        "Confirm expiration calculations are accurate",
        "Test ISE node sync functionality",
        "Validate scheduled sync runs at configured interval",
        "Test certificate deletion works",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-008",
      "title": "Audit Device Inventory Tool",
      "description": "As a NOC engineer, I need the device inventory to reliably scan and store hardware/firmware information.",
      "acceptanceCriteria": [
        "Verify device scanning works for all supported vendors (Cisco IOS, IOS-XE, NX-OS, Aruba)",
        "Confirm inventory data is stored correctly",
        "Test CSV export functionality",
        "Validate SolarWinds node linking",
        "Test device deletion from inventory",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-009",
      "title": "Audit Topology Builder",
      "description": "As a NOC engineer, I need the topology builder to reliably discover network neighbors and visualize topology.",
      "acceptanceCriteria": [
        "Verify CDP/LLDP neighbor collection works",
        "Confirm multi-vendor support (Cisco, Dell, etc.)",
        "Test topology visualization renders correctly",
        "Validate device type auto-detection",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-010",
      "title": "Audit Authentication and Admin Panel",
      "description": "As a NOC engineer, I need authentication and admin features to work securely and reliably.",
      "acceptanceCriteria": [
        "Verify login/logout functionality",
        "Confirm user creation and role assignment works",
        "Test password change functionality",
        "Validate page settings (feature visibility) work",
        "Confirm audit logging captures all actions",
        "Test KB access level permissions",
        "Document any issues found and fixes applied in progress.txt",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-011",
      "title": "Add Timezone Configuration to Admin Panel",
      "description": "As an admin, I want to configure the application timezone so all scheduled operations use the correct local time.",
      "acceptanceCriteria": [
        "Add app_settings table with timezone field (default: 'America/Chicago')",
        "Create admin settings page at /admin/settings for timezone configuration",
        "Add timezone dropdown with common US timezones (EST, CST, MST, PST, etc.)",
        "Display current configured timezone on settings page",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-012",
      "title": "Integrate Timezone Setting into Scheduling Systems",
      "description": "As a NOC engineer, I need all scheduled operations to respect the configured timezone so changes execute at the correct local time.",
      "acceptanceCriteria": [
        "Update change window scheduler to use configured timezone",
        "Update bulk SSH scheduler to use configured timezone",
        "Update WLC Summer Guest scheduler to use configured timezone",
        "Update certificate sync scheduler to use configured timezone",
        "Update WLC dashboard polling display to show times in configured timezone",
        "Add get_app_timezone() helper function",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-013",
      "title": "Create Auto-Updating AP Inventory Database Schema",
      "description": "As a developer, I need database tables to store the auto-updating AP inventory with proper deduplication.",
      "acceptanceCriteria": [
        "Create ap_inventory table with fields: ap_name, ap_ip, ap_model, ap_mac, ap_location, ap_state, slots, country, wlc_host, first_seen, last_seen",
        "Add unique constraint on (ap_mac, wlc_host) to prevent duplicates",
        "Create index on last_seen for efficient cleanup queries",
        "Create ap_inventory_settings table for configuration",
        "Typecheck passes"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-014",
      "title": "Implement AP Inventory Polling During Dashboard Updates",
      "description": "As a NOC engineer, I want AP inventory to update automatically during normal WLC polling so I always have current data.",
      "acceptanceCriteria": [
        "Extend dashboard polling to collect AP details (name, IP, model, MAC, location, state, slots, country)",
        "Insert new APs with first_seen = now, last_seen = now",
        "Update existing APs' last_seen timestamp on each poll",
        "Only insert if AP MAC + WLC host combo doesn't exist (no duplicates)",
        "Track which WLC controller each AP belongs to",
        "Typecheck passes"
      ],
      "priority": 14,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-015",
      "title": "Implement AP Inventory Cleanup (5-Day Stale Removal)",
      "description": "As a NOC engineer, I want APs not seen for 5+ days to be automatically removed so the inventory stays current.",
      "acceptanceCriteria": [
        "Add cleanup function that runs after each AP inventory update",
        "Delete AP records where last_seen < (now - 5 days)",
        "Log removed APs for audit purposes",
        "Do not remove APs that were just added (protect against clock issues)",
        "Typecheck passes"
      ],
      "priority": 15,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-016",
      "title": "Create AP Inventory Dashboard Page",
      "description": "As a NOC engineer, I want a dedicated page to view the auto-updating AP inventory with filtering and export options.",
      "acceptanceCriteria": [
        "Create /tools/wlc/ap-inventory route and template",
        "Display AP inventory table with all fields including WLC host",
        "Add search/filter by AP name, model, WLC, location",
        "Show first_seen and last_seen timestamps",
        "Add total AP count summary",
        "Group or filter by WLC controller",
        "Add navigation from WLC dashboard",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 16,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-017",
      "title": "Implement AP Inventory CSV Export",
      "description": "As a NOC engineer, I want to download the AP inventory as CSV for reporting and analysis.",
      "acceptanceCriteria": [
        "Add CSV export button to AP inventory page",
        "Export includes all fields: AP Name, IP, Model, MAC, Location, State, Slots, Country, WLC Host, First Seen, Last Seen",
        "Apply current filters to export (filtered export)",
        "Filename format: ap_inventory_YYYY-MM-DD.csv",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 17,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-018",
      "title": "Create SolarWinds Hardware/Software Inventory Schema",
      "description": "As a developer, I need database tables to store hardware/software inventory data from SolarWinds for CVE analysis.",
      "acceptanceCriteria": [
        "Extend solarwinds_nodes table or create sw_inventory table with: node_id, hostname, vendor, model, hardware_version, software_version, ip_address, organization, last_synced",
        "Add indexes for efficient searching by vendor, model, software_version",
        "Ensure data is populated from existing SolarWinds sync",
        "Typecheck passes"
      ],
      "priority": 18,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-019",
      "title": "Create SolarWinds Inventory Dashboard Page",
      "description": "As a NOC engineer, I want a dashboard to view and search hardware/software inventory so I can assess CVE impact.",
      "acceptanceCriteria": [
        "Create /tools/solarwinds/inventory route and template",
        "Display summary charts: device count by vendor, devices by software version",
        "Add searchable/filterable data table with all inventory fields",
        "Enable multi-select filters for vendor, model, software version",
        "Show total device counts per filter selection",
        "Add navigation from SolarWinds nodes page",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 19,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-020",
      "title": "Implement SolarWinds Inventory Search and Aggregation",
      "description": "As a NOC engineer, I want to search inventory by version and see counts so I can quickly assess CVE exposure.",
      "acceptanceCriteria": [
        "Add search box for software version (partial match supported)",
        "Display aggregated counts: X devices running version Y",
        "Allow clicking version count to see device list",
        "Support regex or wildcard search for version ranges",
        "Show results grouped by vendor -> model -> version hierarchy",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 20,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-021",
      "title": "Implement SolarWinds Inventory Export",
      "description": "As a NOC engineer, I want to export inventory search results for CVE reports and remediation tracking.",
      "acceptanceCriteria": [
        "Add CSV export for full inventory",
        "Add CSV export for current search/filter results",
        "Include all fields: hostname, vendor, model, hardware_version, software_version, ip_address, organization",
        "Add aggregation summary export (counts per version)",
        "Filename format: solarwinds_inventory_YYYY-MM-DD.csv",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 21,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-022",
      "title": "Create Production Readiness Documentation",
      "description": "As a NOC engineer, I need documentation of all audit findings and a runbook for using the toolkit in production.",
      "acceptanceCriteria": [
        "Create docs/audit-findings.md with all issues found and fixes applied",
        "Create docs/production-runbook.md with operational procedures",
        "Document all scheduled job systems and their timing behavior",
        "Document timezone configuration and its effects",
        "Include troubleshooting guide for common issues",
        "Document the new AP inventory and SolarWinds inventory features"
      ],
      "priority": 22,
      "passes": false,
      "notes": ""
    }
  ]
}
